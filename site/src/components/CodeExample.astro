---
const mainTsCode = `<span class="comment">// Your app's entry point</span>
<span class="keyword">import</span> &#123; openWindow, windowEvents &#125; <span class="keyword">from</span> <span class="string">"host:ui"</span>;
<span class="keyword">import</span> &#123; readTextFile &#125; <span class="keyword">from</span> <span class="string">"host:fs"</span>;

<span class="comment">// Open a window with native WebView</span>
<span class="keyword">const</span> win = <span class="keyword">await</span> openWindow(&#123;
  url: <span class="string">"app://index.html"</span>,
  title: <span class="string">"My Forge App"</span>,
  width: <span class="number">900</span>,
  height: <span class="number">600</span>,
&#125;);

<span class="comment">// Listen for events from your UI</span>
<span class="keyword">for await</span> (<span class="keyword">const</span> event <span class="keyword">of</span> windowEvents()) &#123;
  <span class="keyword">if</span> (event.channel === <span class="string">"load-file"</span>) &#123;
    <span class="keyword">const</span> content = <span class="keyword">await</span> readTextFile(event.payload);
    win.send(<span class="string">"file-loaded"</span>, content);
  &#125;
&#125;`;

const indexHtmlCode = `<span class="tag">&lt;script&gt;</span>
  <span class="comment">// Send messages to Deno runtime</span>
  window.host.send(<span class="string">"load-file"</span>, <span class="string">"/path/to/file"</span>);

  <span class="comment">// Receive responses</span>
  window.host.on(<span class="string">"file-loaded"</span>, (content) =&gt; &#123;
    document.getElementById(<span class="string">"editor"</span>).value = content;
  &#125;);
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;textarea</span> <span class="attr">id</span>=<span class="string">"editor"</span><span class="tag">&gt;&lt;/textarea&gt;</span>`;
---

<section class="code-example">
  <div class="container">
    <div class="section-header">
      <h2>Simple & Powerful</h2>
      <p>Build desktop apps with the same code you already know</p>
    </div>

    <div class="code-grid">
      <div class="code-block">
        <div class="code-header">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="filename">src/main.ts</span>
        </div>
        <pre><code set:html={mainTsCode} /></pre>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="filename">web/index.html</span>
        </div>
        <pre><code set:html={indexHtmlCode} /></pre>
      </div>
    </div>

    <div class="host-modules">
      <h3>Host Modules</h3>
      <div class="modules-grid">
        <a href="/api/host-ui/" class="module-badge">
          <code>host:ui</code>
          <span>Windows, Dialogs, Menus</span>
        </a>
        <a href="/api/host-fs/" class="module-badge">
          <code>host:fs</code>
          <span>File System Access</span>
        </a>
        <a href="/api/host-net/" class="module-badge">
          <code>host:net</code>
          <span>HTTP Requests</span>
        </a>
        <a href="/api/host-sys/" class="module-badge">
          <code>host:sys</code>
          <span>System Info, Clipboard</span>
        </a>
        <a href="/api/host-process/" class="module-badge">
          <code>host:process</code>
          <span>Spawn Processes</span>
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  .code-example {
    padding: 6rem 2rem;
    background: linear-gradient(180deg, #0a0a0a 0%, #0d0d10 100%);
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .section-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .section-header h2 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }

  .section-header p {
    font-size: 1.25rem;
    color: #888;
  }

  .code-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1.5rem;
    margin-bottom: 4rem;
  }

  .code-block {
    background: #111;
    border: 1px solid #222;
    border-radius: 12px;
    overflow: hidden;
  }

  .code-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: #0a0a0a;
    border-bottom: 1px solid #222;
  }

  .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  .dot.red { background: #ff5f57; }
  .dot.yellow { background: #febc2e; }
  .dot.green { background: #28c840; }

  .filename {
    margin-left: auto;
    font-size: 0.8rem;
    color: #666;
    font-family: 'JetBrains Mono', monospace;
  }

  pre {
    padding: 1.25rem;
    margin: 0;
    overflow-x: auto;
    font-size: 0.85rem;
    line-height: 1.7;
  }

  code {
    font-family: 'JetBrains Mono', monospace;
  }

  .keyword { color: #c678dd; }
  .string { color: #98c379; }
  .number { color: #d19a66; }
  .comment { color: #5c6370; }
  .tag { color: #e06c75; }
  .attr { color: #d19a66; }

  .host-modules {
    text-align: center;
  }

  .host-modules h3 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: #ccc;
  }

  .modules-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
  }

  .module-badge {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    padding: 1rem 1.5rem;
    background: #151518;
    border: 1px solid #222;
    border-radius: 8px;
    text-decoration: none;
    transition: all 0.2s;
  }

  .module-badge:hover {
    border-color: #0066cc;
    background: #18181b;
  }

  .module-badge code {
    color: #0099ff;
    font-size: 0.95rem;
  }

  .module-badge span {
    font-size: 0.8rem;
    color: #666;
  }

  @media (max-width: 640px) {
    .code-grid {
      grid-template-columns: 1fr;
    }

    pre {
      font-size: 0.75rem;
    }
  }
</style>
