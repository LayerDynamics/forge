import { c as create_ssr_component, d as createEventDispatcher, f as add_attribute, e as escape, o as onDestroy, v as validate_component } from "../../chunks/ssr.js";
const css$1 = {
  code: ".lock-screen.svelte-1neqdbs.svelte-1neqdbs{height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, var(--bg-primary) 0%, #1a1025 100%);padding:var(--spacing-lg)}.lock-container.svelte-1neqdbs.svelte-1neqdbs{width:100%;max-width:400px;text-align:center}.lock-icon.svelte-1neqdbs.svelte-1neqdbs{width:80px;height:80px;margin:0 auto var(--spacing-lg);display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, var(--accent-primary) 0%, #9333ea 100%);border-radius:var(--radius-xl);color:white}.lock-title.svelte-1neqdbs.svelte-1neqdbs{margin-bottom:var(--spacing-sm);font-size:28px;font-weight:600}.lock-subtitle.svelte-1neqdbs.svelte-1neqdbs{color:var(--text-secondary);margin-bottom:var(--spacing-xl)}.lock-form.svelte-1neqdbs.svelte-1neqdbs{text-align:left}.password-input-wrapper.svelte-1neqdbs.svelte-1neqdbs{position:relative}.toggle-password.svelte-1neqdbs.svelte-1neqdbs{position:absolute;right:var(--spacing-md);top:50%;transform:translateY(-50%);background:none;border:none;color:var(--text-muted);cursor:pointer;padding:var(--spacing-xs)}.toggle-password.svelte-1neqdbs.svelte-1neqdbs:hover{color:var(--text-primary)}.password-requirements.svelte-1neqdbs.svelte-1neqdbs{margin-bottom:var(--spacing-md);padding:var(--spacing-md);background:var(--bg-secondary);border-radius:var(--radius-md)}.requirements-list.svelte-1neqdbs.svelte-1neqdbs{list-style:none;margin-top:var(--spacing-sm);display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xs)}.requirements-list.svelte-1neqdbs li.svelte-1neqdbs{font-size:12px;color:var(--text-muted);display:flex;align-items:center;gap:var(--spacing-xs)}.requirements-list.svelte-1neqdbs li.svelte-1neqdbs::before{content:'○';font-size:8px}.requirements-list.svelte-1neqdbs li.valid.svelte-1neqdbs{color:var(--success)}.requirements-list.svelte-1neqdbs li.valid.svelte-1neqdbs::before{content:'●'}.error-message.svelte-1neqdbs.svelte-1neqdbs{padding:var(--spacing-sm) var(--spacing-md);background:rgba(239, 68, 68, 0.1);border:1px solid var(--error);border-radius:var(--radius-md);color:var(--error);font-size:14px;margin-bottom:var(--spacing-md)}.security-note.svelte-1neqdbs.svelte-1neqdbs{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);margin-top:var(--spacing-xl);font-size:12px;color:var(--text-muted)}",
  map: `{"version":3,"file":"LockScreen.svelte","sources":["LockScreen.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { createEventDispatcher } from \\"svelte\\";\\nexport let isFirstTime = true;\\nexport let error = \\"\\";\\nconst dispatch = createEventDispatcher();\\nlet password = \\"\\";\\nlet confirmPassword = \\"\\";\\nlet showPassword = false;\\nlet validationError = \\"\\";\\nfunction handleSubmit() {\\n  validationError = \\"\\";\\n  if (!password) {\\n    validationError = \\"Password is required\\";\\n    return;\\n  }\\n  if (isFirstTime) {\\n    if (password.length < 8) {\\n      validationError = \\"Password must be at least 8 characters\\";\\n      return;\\n    }\\n    if (password !== confirmPassword) {\\n      validationError = \\"Passwords do not match\\";\\n      return;\\n    }\\n    dispatch(\\"setup\\", { password });\\n  } else {\\n    dispatch(\\"unlock\\", { password });\\n  }\\n}\\nfunction toggleShowPassword() {\\n  showPassword = !showPassword;\\n}\\nfunction handleKeydown(event) {\\n  if (event.key === \\"Enter\\") {\\n    event.preventDefault();\\n    handleSubmit();\\n  }\\n}\\n<\/script>\\n\\n<div class=\\"lock-screen\\">\\n  <div class=\\"lock-container animate-fade-in\\">\\n    <div class=\\"lock-icon\\">\\n      <svg width=\\"64\\" height=\\"64\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\">\\n        <rect x=\\"3\\" y=\\"11\\" width=\\"18\\" height=\\"11\\" rx=\\"2\\" ry=\\"2\\"/>\\n        <path d=\\"M7 11V7a5 5 0 0 1 10 0v4\\"/>\\n      </svg>\\n    </div>\\n\\n    <h1 class=\\"lock-title\\">Secure Vault</h1>\\n    <p class=\\"lock-subtitle\\">\\n      {#if isFirstTime}\\n        Create a master password to protect your vault\\n      {:else}\\n        Enter your master password to unlock\\n      {/if}\\n    </p>\\n\\n    <form class=\\"lock-form\\" on:submit|preventDefault={handleSubmit}>\\n      <div class=\\"form-group\\">\\n        <label class=\\"label\\" for=\\"password\\">Master Password</label>\\n        <div class=\\"password-input-wrapper\\">\\n          {#if showPassword}\\n            <input\\n              id=\\"password\\"\\n              type=\\"text\\"\\n              class=\\"input input-lg\\"\\n              bind:value={password}\\n              placeholder=\\"Enter your password\\"\\n              autocomplete={isFirstTime ? 'new-password' : 'current-password'}\\n              on:keydown={handleKeydown}\\n            />\\n          {:else}\\n            <input\\n              id=\\"password\\"\\n              type=\\"password\\"\\n              class=\\"input input-lg\\"\\n              bind:value={password}\\n              placeholder=\\"Enter your password\\"\\n              autocomplete={isFirstTime ? 'new-password' : 'current-password'}\\n              on:keydown={handleKeydown}\\n            />\\n          {/if}\\n          <button\\n            type=\\"button\\"\\n            class=\\"toggle-password\\"\\n            on:click={toggleShowPassword}\\n            aria-label={showPassword ? 'Hide password' : 'Show password'}\\n          >\\n            {#if showPassword}\\n              <svg width=\\"20\\" height=\\"20\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"2\\">\\n                <path d=\\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\\"/>\\n                <line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"/>\\n              </svg>\\n            {:else}\\n              <svg width=\\"20\\" height=\\"20\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"2\\">\\n                <path d=\\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\\"/>\\n                <circle cx=\\"12\\" cy=\\"12\\" r=\\"3\\"/>\\n              </svg>\\n            {/if}\\n          </button>\\n        </div>\\n      </div>\\n\\n      {#if isFirstTime}\\n        <div class=\\"form-group\\">\\n          <label class=\\"label\\" for=\\"confirm-password\\">Confirm Password</label>\\n          {#if showPassword}\\n            <input\\n              id=\\"confirm-password\\"\\n              type=\\"text\\"\\n              class=\\"input input-lg\\"\\n              bind:value={confirmPassword}\\n              placeholder=\\"Confirm your password\\"\\n              autocomplete=\\"new-password\\"\\n              on:keydown={handleKeydown}\\n            />\\n          {:else}\\n            <input\\n              id=\\"confirm-password\\"\\n              type=\\"password\\"\\n              class=\\"input input-lg\\"\\n              bind:value={confirmPassword}\\n              placeholder=\\"Confirm your password\\"\\n              autocomplete=\\"new-password\\"\\n              on:keydown={handleKeydown}\\n            />\\n          {/if}\\n        </div>\\n\\n        <div class=\\"password-requirements\\">\\n          <p class=\\"text-sm text-muted\\">Password requirements:</p>\\n          <ul class=\\"requirements-list\\">\\n            <li class:valid={password.length >= 8}>At least 8 characters</li>\\n            <li class:valid={/[A-Z]/.test(password)}>One uppercase letter</li>\\n            <li class:valid={/[a-z]/.test(password)}>One lowercase letter</li>\\n            <li class:valid={/[0-9]/.test(password)}>One number</li>\\n          </ul>\\n        </div>\\n      {/if}\\n\\n      {#if validationError || error}\\n        <div class=\\"error-message animate-shake\\">\\n          {validationError || error}\\n        </div>\\n      {/if}\\n\\n      <button type=\\"button\\" class=\\"btn btn-primary btn-lg w-full\\" on:click={handleSubmit}>\\n        {#if isFirstTime}\\n          Create Vault\\n        {:else}\\n          Unlock Vault\\n        {/if}\\n      </button>\\n    </form>\\n\\n    <p class=\\"security-note\\">\\n      <svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"2\\">\\n        <path d=\\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\\"/>\\n      </svg>\\n      Your data is encrypted with AES-256-GCM\\n    </p>\\n  </div>\\n</div>\\n\\n<style>\\n  .lock-screen {\\n    height: 100%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    background: linear-gradient(135deg, var(--bg-primary) 0%, #1a1025 100%);\\n    padding: var(--spacing-lg);\\n  }\\n\\n  .lock-container {\\n    width: 100%;\\n    max-width: 400px;\\n    text-align: center;\\n  }\\n\\n  .lock-icon {\\n    width: 80px;\\n    height: 80px;\\n    margin: 0 auto var(--spacing-lg);\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    background: linear-gradient(135deg, var(--accent-primary) 0%, #9333ea 100%);\\n    border-radius: var(--radius-xl);\\n    color: white;\\n  }\\n\\n  .lock-title {\\n    margin-bottom: var(--spacing-sm);\\n    font-size: 28px;\\n    font-weight: 600;\\n  }\\n\\n  .lock-subtitle {\\n    color: var(--text-secondary);\\n    margin-bottom: var(--spacing-xl);\\n  }\\n\\n  .lock-form {\\n    text-align: left;\\n  }\\n\\n  .password-input-wrapper {\\n    position: relative;\\n  }\\n\\n  .toggle-password {\\n    position: absolute;\\n    right: var(--spacing-md);\\n    top: 50%;\\n    transform: translateY(-50%);\\n    background: none;\\n    border: none;\\n    color: var(--text-muted);\\n    cursor: pointer;\\n    padding: var(--spacing-xs);\\n  }\\n\\n  .toggle-password:hover {\\n    color: var(--text-primary);\\n  }\\n\\n  .password-requirements {\\n    margin-bottom: var(--spacing-md);\\n    padding: var(--spacing-md);\\n    background: var(--bg-secondary);\\n    border-radius: var(--radius-md);\\n  }\\n\\n  .requirements-list {\\n    list-style: none;\\n    margin-top: var(--spacing-sm);\\n    display: grid;\\n    grid-template-columns: 1fr 1fr;\\n    gap: var(--spacing-xs);\\n  }\\n\\n  .requirements-list li {\\n    font-size: 12px;\\n    color: var(--text-muted);\\n    display: flex;\\n    align-items: center;\\n    gap: var(--spacing-xs);\\n  }\\n\\n  .requirements-list li::before {\\n    content: '○';\\n    font-size: 8px;\\n  }\\n\\n  .requirements-list li.valid {\\n    color: var(--success);\\n  }\\n\\n  .requirements-list li.valid::before {\\n    content: '●';\\n  }\\n\\n  .error-message {\\n    padding: var(--spacing-sm) var(--spacing-md);\\n    background: rgba(239, 68, 68, 0.1);\\n    border: 1px solid var(--error);\\n    border-radius: var(--radius-md);\\n    color: var(--error);\\n    font-size: 14px;\\n    margin-bottom: var(--spacing-md);\\n  }\\n\\n  .security-note {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    gap: var(--spacing-sm);\\n    margin-top: var(--spacing-xl);\\n    font-size: 12px;\\n    color: var(--text-muted);\\n  }\\n</style>\\n"],"names":[],"mappings":"AAqKE,0CAAa,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,UAAU,CAAE,gBAAgB,MAAM,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CACvE,OAAO,CAAE,IAAI,YAAY,CAC3B,CAEA,6CAAgB,CACd,KAAK,CAAE,IAAI,CACX,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,MACd,CAEA,wCAAW,CACT,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,CAAC,CAAC,IAAI,CAAC,IAAI,YAAY,CAAC,CAChC,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,UAAU,CAAE,gBAAgB,MAAM,CAAC,CAAC,IAAI,gBAAgB,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAC3E,aAAa,CAAE,IAAI,WAAW,CAAC,CAC/B,KAAK,CAAE,KACT,CAEA,yCAAY,CACV,aAAa,CAAE,IAAI,YAAY,CAAC,CAChC,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GACf,CAEA,4CAAe,CACb,KAAK,CAAE,IAAI,gBAAgB,CAAC,CAC5B,aAAa,CAAE,IAAI,YAAY,CACjC,CAEA,wCAAW,CACT,UAAU,CAAE,IACd,CAEA,qDAAwB,CACtB,QAAQ,CAAE,QACZ,CAEA,8CAAiB,CACf,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,YAAY,CAAC,CACxB,GAAG,CAAE,GAAG,CACR,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,YAAY,CAAC,CACxB,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,IAAI,YAAY,CAC3B,CAEA,8CAAgB,MAAO,CACrB,KAAK,CAAE,IAAI,cAAc,CAC3B,CAEA,oDAAuB,CACrB,aAAa,CAAE,IAAI,YAAY,CAAC,CAChC,OAAO,CAAE,IAAI,YAAY,CAAC,CAC1B,UAAU,CAAE,IAAI,cAAc,CAAC,CAC/B,aAAa,CAAE,IAAI,WAAW,CAChC,CAEA,gDAAmB,CACjB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,IAAI,YAAY,CAAC,CAC7B,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,CAC9B,GAAG,CAAE,IAAI,YAAY,CACvB,CAEA,iCAAkB,CAAC,iBAAG,CACpB,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,YAAY,CAAC,CACxB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,IAAI,YAAY,CACvB,CAEA,iCAAkB,CAAC,iBAAE,QAAS,CAC5B,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,GACb,CAEA,iCAAkB,CAAC,EAAE,qBAAO,CAC1B,KAAK,CAAE,IAAI,SAAS,CACtB,CAEA,iCAAkB,CAAC,EAAE,qBAAM,QAAS,CAClC,OAAO,CAAE,GACX,CAEA,4CAAe,CACb,OAAO,CAAE,IAAI,YAAY,CAAC,CAAC,IAAI,YAAY,CAAC,CAC5C,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAClC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,CAC9B,aAAa,CAAE,IAAI,WAAW,CAAC,CAC/B,KAAK,CAAE,IAAI,OAAO,CAAC,CACnB,SAAS,CAAE,IAAI,CACf,aAAa,CAAE,IAAI,YAAY,CACjC,CAEA,4CAAe,CACb,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,GAAG,CAAE,IAAI,YAAY,CAAC,CACtB,UAAU,CAAE,IAAI,YAAY,CAAC,CAC7B,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,YAAY,CACzB"}`
};
const LockScreen = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { isFirstTime = true } = $$props;
  let { error = "" } = $$props;
  createEventDispatcher();
  let password = "";
  let confirmPassword = "";
  if ($$props.isFirstTime === void 0 && $$bindings.isFirstTime && isFirstTime !== void 0) $$bindings.isFirstTime(isFirstTime);
  if ($$props.error === void 0 && $$bindings.error && error !== void 0) $$bindings.error(error);
  $$result.css.add(css$1);
  return `<div class="lock-screen svelte-1neqdbs"><div class="lock-container animate-fade-in svelte-1neqdbs"><div class="lock-icon svelte-1neqdbs" data-svelte-h="svelte-3d06x9"><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg></div> <h1 class="lock-title svelte-1neqdbs" data-svelte-h="svelte-17q8kdm">Secure Vault</h1> <p class="lock-subtitle svelte-1neqdbs">${isFirstTime ? `Create a master password to protect your vault` : `Enter your master password to unlock`}</p> <form class="lock-form svelte-1neqdbs"><div class="form-group"><label class="label" for="password" data-svelte-h="svelte-1hasbyx">Master Password</label> <div class="password-input-wrapper svelte-1neqdbs">${`<input id="password" type="password" class="input input-lg" placeholder="Enter your password"${add_attribute("autocomplete", isFirstTime ? "new-password" : "current-password", 0)}${add_attribute("value", password, 0)}>`} <button type="button" class="toggle-password svelte-1neqdbs"${add_attribute("aria-label", "Show password", 0)}>${`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>`}</button></div></div> ${isFirstTime ? `<div class="form-group"><label class="label" for="confirm-password" data-svelte-h="svelte-1svhfje">Confirm Password</label> ${`<input id="confirm-password" type="password" class="input input-lg" placeholder="Confirm your password" autocomplete="new-password"${add_attribute("value", confirmPassword, 0)}>`}</div> <div class="password-requirements svelte-1neqdbs"><p class="text-sm text-muted" data-svelte-h="svelte-is0s3p">Password requirements:</p> <ul class="requirements-list svelte-1neqdbs"><li class="${["svelte-1neqdbs", password.length >= 8 ? "valid" : ""].join(" ").trim()}" data-svelte-h="svelte-3pfnpp">At least 8 characters</li> <li class="${["svelte-1neqdbs", /[A-Z]/.test(password) ? "valid" : ""].join(" ").trim()}" data-svelte-h="svelte-qwfdi1">One uppercase letter</li> <li class="${["svelte-1neqdbs", /[a-z]/.test(password) ? "valid" : ""].join(" ").trim()}" data-svelte-h="svelte-1ir6izo">One lowercase letter</li> <li class="${["svelte-1neqdbs", /[0-9]/.test(password) ? "valid" : ""].join(" ").trim()}" data-svelte-h="svelte-1bze0ro">One number</li></ul></div>` : ``} ${error ? `<div class="error-message animate-shake svelte-1neqdbs">${escape(error)}</div>` : ``} <button type="button" class="btn btn-primary btn-lg w-full">${isFirstTime ? `Create Vault` : `Unlock Vault`}</button></form> <p class="security-note svelte-1neqdbs" data-svelte-h="svelte-10stlx1"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
      Your data is encrypted with AES-256-GCM</p></div> </div>`;
});
const css = {
  code: ".app.svelte-1gbdkny{height:100vh;width:100vw;display:flex;flex-direction:column;background-color:var(--bg-primary);color:var(--text-primary)}.vault-layout.svelte-1gbdkny{display:flex;height:100%;overflow:hidden}.main-content.svelte-1gbdkny{flex:1;display:flex;overflow:hidden}.notes-panel.svelte-1gbdkny{display:flex;width:100%;height:100%}.files-panel.svelte-1gbdkny{display:flex;width:100%;height:100%}",
  map: '{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount, onDestroy } from \\"svelte\\";\\nimport LockScreen from \\"$lib/components/LockScreen.svelte\\";\\nimport Sidebar from \\"$lib/components/Sidebar.svelte\\";\\nimport NoteList from \\"$lib/components/NoteList.svelte\\";\\nimport NoteEditor from \\"$lib/components/NoteEditor.svelte\\";\\nimport PasswordGenerator from \\"$lib/components/PasswordGenerator.svelte\\";\\nimport FileList from \\"$lib/components/FileList.svelte\\";\\nimport FileViewer from \\"$lib/components/FileViewer.svelte\\";\\nlet isUnlocked = false;\\nlet isFirstTime = true;\\nlet isLoading = false;\\nlet error = \\"\\";\\nlet toast = null;\\nlet notes = [];\\nlet selectedNoteId = null;\\nlet selectedNoteContent = null;\\nlet files = [];\\nlet selectedFileId = null;\\nlet selectedFileContent = null;\\nlet isFileLoading = false;\\nlet selectedCategory = \\"all\\";\\nlet searchQuery = \\"\\";\\nlet fileSearchQuery = \\"\\";\\nlet currentView = \\"notes\\";\\nlet activityInterval;\\n$: selectedNote = selectedNoteContent && selectedNoteContent.id === selectedNoteId ? selectedNoteContent : notes.find((n) => n.id === selectedNoteId) || null;\\n$: filteredNotes = notes.filter((note) => {\\n  const matchesCategory = selectedCategory === \\"all\\" || note.category === selectedCategory;\\n  const matchesSearch = !searchQuery || note.title.toLowerCase().includes(searchQuery.toLowerCase()) || note.content.toLowerCase().includes(searchQuery.toLowerCase());\\n  return matchesCategory && matchesSearch;\\n});\\n$: selectedFile = files.find((f) => f.id === selectedFileId) || null;\\n$: filteredFiles = files.filter((file) => {\\n  const matchesSearch = !fileSearchQuery || file.name.toLowerCase().includes(fileSearchQuery.toLowerCase());\\n  return matchesSearch;\\n});\\nonMount(() => {\\n  setupEventListeners();\\n  startActivityTracking();\\n});\\nonDestroy(() => {\\n  if (activityInterval) {\\n    clearInterval(activityInterval);\\n  }\\n});\\nfunction setupEventListeners() {\\n  window.host.on(\\"vault:state\\", (data) => {\\n    const { unlocked, firstTime } = data;\\n    isUnlocked = unlocked;\\n    isFirstTime = firstTime;\\n    if (unlocked) {\\n      loadNotes();\\n      loadFiles();\\n    }\\n  });\\n  window.host.on(\\"vault:unlock-result\\", (data) => {\\n    const { success, error: err, firstTime } = data;\\n    isLoading = false;\\n    if (success) {\\n      isUnlocked = true;\\n      isFirstTime = firstTime ?? false;\\n      loadNotes();\\n      loadFiles();\\n      showToast(\\"Vault unlocked\\", \\"success\\");\\n    } else {\\n      error = err || \\"Failed to unlock vault\\";\\n      showToast(error, \\"error\\");\\n    }\\n  });\\n  window.host.on(\\"note:list-result\\", (data) => {\\n    const { notes: loadedNotes } = data;\\n    notes = loadedNotes || [];\\n  });\\n  window.host.on(\\"note:saved\\", (data) => {\\n    const { success, note } = data;\\n    if (success && note) {\\n      const index = notes.findIndex((n) => n.id === note.id);\\n      if (index >= 0) {\\n        notes[index] = note;\\n        notes = [...notes];\\n      } else {\\n        notes = [...notes, note];\\n      }\\n      showToast(\\"Note saved\\", \\"success\\");\\n    }\\n  });\\n  window.host.on(\\"note:deleted\\", (data) => {\\n    const { success, noteId } = data;\\n    if (success) {\\n      notes = notes.filter((n) => n.id !== noteId);\\n      if (selectedNoteId === noteId) {\\n        selectedNoteId = null;\\n        selectedNoteContent = null;\\n      }\\n      showToast(\\"Note deleted\\", \\"success\\");\\n    }\\n  });\\n  window.host.on(\\"note:get-result\\", (data) => {\\n    const { note } = data;\\n    if (note) {\\n      selectedNoteContent = note;\\n    }\\n  });\\n  window.host.on(\\"auto-lock:warning\\", () => {\\n    showToast(\\"Vault will lock in 30 seconds due to inactivity\\", \\"warning\\");\\n  });\\n  window.host.on(\\"clipboard:copied\\", (data) => {\\n    const { success } = data;\\n    if (success) {\\n      showToast(\\"Copied to clipboard\\", \\"success\\");\\n    }\\n  });\\n  window.host.on(\\"export:result\\", (data) => {\\n    const { success, error: err } = data;\\n    if (success) {\\n      showToast(\\"Backup exported successfully\\", \\"success\\");\\n    } else {\\n      showToast(err || \\"Export failed\\", \\"error\\");\\n    }\\n  });\\n  window.host.on(\\"import:result\\", (data) => {\\n    const { success, error: err, count } = data;\\n    if (success) {\\n      loadNotes();\\n      showToast(`Imported ${count} notes successfully`, \\"success\\");\\n    } else {\\n      showToast(err || \\"Import failed\\", \\"error\\");\\n    }\\n  });\\n  window.host.on(\\"file:list-result\\", (data) => {\\n    const { files: loadedFiles } = data;\\n    files = loadedFiles || [];\\n  });\\n  window.host.on(\\"file:added\\", (data) => {\\n    const { success, file } = data;\\n    if (success && file) {\\n      files = [file, ...files];\\n      showToast(`Added \\"${file.name}\\" to vault`, \\"success\\");\\n    } else {\\n      showToast(\\"Failed to add file\\", \\"error\\");\\n    }\\n  });\\n  window.host.on(\\"file:get-result\\", (data) => {\\n    const { content, file } = data;\\n    isFileLoading = false;\\n    if (content) {\\n      selectedFileContent = content;\\n    }\\n  });\\n  window.host.on(\\"file:saved\\", (data) => {\\n    const { success } = data;\\n    if (success) {\\n      showToast(\\"File saved to disk\\", \\"success\\");\\n    }\\n  });\\n  window.host.on(\\"file:deleted\\", (data) => {\\n    const { success, fileId } = data;\\n    if (success) {\\n      files = files.filter((f) => f.id !== fileId);\\n      if (selectedFileId === fileId) {\\n        selectedFileId = null;\\n        selectedFileContent = null;\\n      }\\n      showToast(\\"File deleted\\", \\"success\\");\\n    }\\n  });\\n  window.host.on(\\"menu:add-file\\", () => {\\n    handleAddFile();\\n  });\\n}\\nfunction loadNotes() {\\n  window.host.send(\\"note:list\\", { category: selectedCategory === \\"all\\" ? void 0 : selectedCategory });\\n}\\nfunction loadFiles() {\\n  window.host.send(\\"file:list\\");\\n}\\nfunction startActivityTracking() {\\n  activityInterval = setInterval(() => {\\n    if (isUnlocked) {\\n      window.host.send(\\"activity:ping\\");\\n    }\\n  }, 3e4);\\n  const trackActivity = () => {\\n    if (isUnlocked) {\\n      window.host.send(\\"activity:ping\\");\\n    }\\n  };\\n  document.addEventListener(\\"mousemove\\", trackActivity);\\n  document.addEventListener(\\"keydown\\", trackActivity);\\n  document.addEventListener(\\"click\\", trackActivity);\\n}\\nfunction handleUnlock(event) {\\n  isLoading = true;\\n  error = \\"\\";\\n  window.host.send(\\"vault:unlock\\", { password: event.detail.password });\\n}\\nfunction handleSetup(event) {\\n  isLoading = true;\\n  error = \\"\\";\\n  window.host.send(\\"vault:setup\\", { password: event.detail.password });\\n}\\nfunction handleLock() {\\n  window.host.send(\\"vault:lock\\");\\n  isUnlocked = false;\\n  notes = [];\\n  selectedNoteId = null;\\n  selectedNoteContent = null;\\n  files = [];\\n  selectedFileId = null;\\n  selectedFileContent = null;\\n  showToast(\\"Vault locked\\", \\"success\\");\\n}\\nfunction handleSelectNote(event) {\\n  selectedNoteId = event.detail.noteId;\\n  selectedNoteContent = null;\\n  currentView = \\"notes\\";\\n  window.host.send(\\"note:get\\", { id: event.detail.noteId });\\n}\\nfunction handleNewNote() {\\n  const newNote = {\\n    id: \\"\\",\\n    title: \\"Untitled Note\\",\\n    content: \\"\\",\\n    category: selectedCategory === \\"all\\" ? \\"personal\\" : selectedCategory,\\n    createdAt: (/* @__PURE__ */ new Date()).toISOString(),\\n    modifiedAt: (/* @__PURE__ */ new Date()).toISOString()\\n  };\\n  window.host.send(\\"note:create\\", { note: newNote });\\n}\\nfunction handleSaveNote(event) {\\n  window.host.send(\\"note:update\\", { note: event.detail.note });\\n}\\nfunction handleDeleteNote(event) {\\n  window.host.send(\\"note:delete\\", { noteId: event.detail.noteId });\\n}\\nfunction handleCopyToClipboard(event) {\\n  window.host.send(\\"clipboard:copy\\", { text: event.detail.text });\\n}\\nfunction handleExport() {\\n  window.host.send(\\"export:backup\\");\\n}\\nfunction handleImport() {\\n  window.host.send(\\"import:backup\\");\\n}\\nfunction handleAddFile() {\\n  window.host.send(\\"file:add\\", { category: \\"personal\\" });\\n}\\nfunction handleSelectFile(event) {\\n  selectedFileId = event.detail.fileId;\\n  selectedFileContent = null;\\n  isFileLoading = true;\\n  currentView = \\"files\\";\\n  window.host.send(\\"file:get\\", { id: event.detail.fileId });\\n}\\nfunction handleSaveFile(event) {\\n  window.host.send(\\"file:save\\", { id: event.detail.fileId });\\n}\\nfunction handleDeleteFile(event) {\\n  window.host.send(\\"file:delete\\", { fileId: event.detail.fileId });\\n}\\nfunction handleFileSearch(event) {\\n  fileSearchQuery = event.detail.query;\\n}\\nfunction handleCategoryChange(event) {\\n  selectedCategory = event.detail.category;\\n  loadNotes();\\n}\\nfunction handleViewChange(event) {\\n  currentView = event.detail.view;\\n  if (currentView === \\"generator\\") {\\n    selectedNoteId = null;\\n  }\\n}\\nfunction handleSearch(event) {\\n  searchQuery = event.detail.query;\\n}\\nfunction showToast(message, type) {\\n  toast = { message, type };\\n  setTimeout(() => {\\n    toast = null;\\n  }, 3e3);\\n}\\n<\/script>\\n\\n<div class=\\"app\\">\\n  {#if !isUnlocked}\\n    <LockScreen\\n      {isFirstTime}\\n      {error}\\n      on:unlock={handleUnlock}\\n      on:setup={handleSetup}\\n    />\\n  {:else}\\n    <div class=\\"vault-layout\\">\\n      <Sidebar\\n        {selectedCategory}\\n        {currentView}\\n        on:categoryChange={handleCategoryChange}\\n        on:viewChange={handleViewChange}\\n        on:newNote={handleNewNote}\\n        on:addFile={handleAddFile}\\n        on:lock={handleLock}\\n        on:export={handleExport}\\n        on:import={handleImport}\\n      />\\n\\n      <main class=\\"main-content\\">\\n        {#if currentView === \'notes\'}\\n          <div class=\\"notes-panel\\">\\n            <NoteList\\n              notes={filteredNotes}\\n              {selectedNoteId}\\n              {searchQuery}\\n              on:selectNote={handleSelectNote}\\n              on:search={handleSearch}\\n            />\\n\\n            <NoteEditor\\n              note={selectedNote}\\n              on:save={handleSaveNote}\\n              on:delete={handleDeleteNote}\\n              on:copy={handleCopyToClipboard}\\n            />\\n          </div>\\n        {:else if currentView === \'files\'}\\n          <div class=\\"files-panel\\">\\n            <FileList\\n              files={filteredFiles}\\n              {selectedFileId}\\n              searchQuery={fileSearchQuery}\\n              on:selectFile={handleSelectFile}\\n              on:search={handleFileSearch}\\n              on:saveFile={handleSaveFile}\\n              on:deleteFile={handleDeleteFile}\\n            />\\n\\n            <FileViewer\\n              file={selectedFile}\\n              content={selectedFileContent}\\n              isLoading={isFileLoading}\\n              on:save={handleSaveFile}\\n              on:delete={handleDeleteFile}\\n            />\\n          </div>\\n        {:else if currentView === \'generator\'}\\n          <PasswordGenerator on:copy={handleCopyToClipboard} />\\n        {/if}\\n      </main>\\n    </div>\\n  {/if}\\n\\n  {#if toast}\\n    <div class=\\"toast toast-{toast.type}\\">\\n      {toast.message}\\n    </div>\\n  {/if}\\n</div>\\n\\n<style>\\n  .app {\\n    height: 100vh;\\n    width: 100vw;\\n    display: flex;\\n    flex-direction: column;\\n    background-color: var(--bg-primary);\\n    color: var(--text-primary);\\n  }\\n\\n  .vault-layout {\\n    display: flex;\\n    height: 100%;\\n    overflow: hidden;\\n  }\\n\\n  .main-content {\\n    flex: 1;\\n    display: flex;\\n    overflow: hidden;\\n  }\\n\\n  .notes-panel {\\n    display: flex;\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  .files-panel {\\n    display: flex;\\n    width: 100%;\\n    height: 100%;\\n  }\\n</style>\\n"],"names":[],"mappings":"AAuWE,mBAAK,CACH,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,gBAAgB,CAAE,IAAI,YAAY,CAAC,CACnC,KAAK,CAAE,IAAI,cAAc,CAC3B,CAEA,4BAAc,CACZ,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,MACZ,CAEA,4BAAc,CACZ,IAAI,CAAE,CAAC,CACP,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,MACZ,CAEA,2BAAa,CACX,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IACV,CAEA,2BAAa,CACX,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IACV"}'
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let isFirstTime = true;
  let error = "";
  let notes = [];
  let selectedNoteId = null;
  let files = [];
  let selectedFileId = null;
  onDestroy(() => {
  });
  $$result.css.add(css);
  notes.find((n) => n.id === selectedNoteId) || null;
  files.find((f) => f.id === selectedFileId) || null;
  return `<div class="app svelte-1gbdkny">${`${validate_component(LockScreen, "LockScreen").$$render($$result, { isFirstTime, error }, {}, {})}`} ${``} </div>`;
});
export {
  Page as default
};
//# sourceMappingURL=_page.svelte.js.map
