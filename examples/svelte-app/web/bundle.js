var Oe=Object.defineProperty;var Te=(t,e,n)=>e in t?Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var g=(t,e,n)=>(Te(t,typeof e!="symbol"?e+"":e,n),n);var Me=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Ne=new Set([...Me]);var ee="4";function x(){}function re(t){return t()}function te(){return Object.create(null)}function P(t){t.forEach(re)}function se(t){return typeof t=="function"}function ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function De(t){return Object.keys(t).length===0}var ae=globalThis,H=class le{constructor(e){g(this,"_listeners","WeakMap"in ae?new WeakMap:void 0);g(this,"_observer");g(this,"options");this.options=e}observe(e,n){return this._listeners.set(e,n),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{for(let n of e)le.entries.set(n.target,n),this._listeners.get(n.target)?.(n)}))}};H.entries="WeakMap"in ae?new WeakMap:void 0;var ce=!1;function Le(){ce=!0}function Ie(){ce=!1}function C(t,e){t.appendChild(e)}function ue(t,e,n){let o=je(t);if(!o.getElementById(e)){let s=w("style");s.id=e,s.textContent=n,Pe(o,s)}}function je(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Pe(t,e){return C(t.head||t,e),e.sheet}function O(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function J(t){return document.createTextNode(t)}function z(){return J(" ")}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Re(t){return Array.from(t.childNodes)}function fe(t,e){e=""+e,t.data!==e&&(t.data=e)}var _t=new H({box:"content-box"}),mt=new H({box:"border-box"}),gt=new H({box:"device-pixel-content-box"});function Be(t){let e={};return t.childNodes.forEach(n=>{e[n.slot||"default"]=!0}),e}var j;function I(t){j=t}function qe(){if(!j)throw new Error("Function called outside component initialization");return j}function Y(t){qe().$$.on_destroy.push(t)}var A=[];var ne=[],D=[],oe=[],He=Promise.resolve(),W=!1;function ze(){W||(W=!0,He.then(de))}function Q(t){D.push(t)}var V=new Set,N=0;function de(){if(N!==0)return;let t=j;do{try{for(;N<A.length;){let e=A[N];N++,I(e),Ue(e.$$)}}catch(e){throw A.length=0,N=0,e}for(I(null),A.length=0,N=0;ne.length;)ne.pop()();for(let e=0;e<D.length;e+=1){let n=D[e];V.has(n)||(V.add(n),n())}D.length=0}while(A.length);for(;oe.length;)oe.pop()();W=!1,V.clear(),I(t)}function Ue(t){if(t.fragment!==null){t.update(),P(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}function Ve(t){let e=[],n=[];D.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),D=e}var q=new Set,S;function Z(){S={r:0,c:[],p:S}}function K(){S.r||P(S.c),S=S.p}function y(t,e){t&&t.i&&(q.delete(t),t.i(e))}function v(t,e,n,o){if(t&&t.o){if(q.has(t))return;q.add(t),S.c.push(()=>{q.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function L(t){t&&t.c()}function T(t,e,n){let{fragment:o,after_update:s}=t.$$;o&&o.m(e,n),Q(()=>{let r=t.$$.on_mount.map(re).filter(se);t.$$.on_destroy?t.$$.on_destroy.push(...r):P(r),t.$$.on_mount=[]}),s.forEach(Q)}function M(t,e){let n=t.$$;n.fragment!==null&&(Ve(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ge(t,e){t.$$.dirty[0]===-1&&(A.push(t),ze(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,n,o,s,r,i=null,f=[-1]){let p=j;I(t);let a=t.$$={fragment:null,ctx:[],props:r,update:x,not_equal:s,bound:te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(p?p.$$.context:[])),callbacks:te(),dirty:f,skip_bound:!1,root:e.target||p.$$.root};i&&i(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(c,d,...m)=>{let $=m.length?m[0]:d;return a.ctx&&s(a.ctx[c],a.ctx[c]=$)&&(!a.skip_bound&&a.bound[c]&&a.bound[c]($),u&&Ge(t,c)),d}):[],a.update(),u=!0,P(a.before_update),a.fragment=o?o(a.ctx):!1,e.target){if(e.hydrate){Le();let c=Re(e.target);a.fragment&&a.fragment.l(c),c.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&y(t.$$.fragment),T(t,e.target,e.anchor),Ie(),de()}I(p)}var We;typeof HTMLElement=="function"&&(We=class extends HTMLElement{constructor(e,n,o){super();g(this,"$$ctor");g(this,"$$s");g(this,"$$c");g(this,"$$cn",!1);g(this,"$$d",{});g(this,"$$r",!1);g(this,"$$p_d",{});g(this,"$$l",{});g(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=n,o&&this.attachShadow({mode:"open"})}addEventListener(e,n,o){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(n),this.$$c){let s=this.$$c.$on(e,n);this.$$l_u.set(n,s)}super.addEventListener(e,n,o)}removeEventListener(e,n,o){if(super.removeEventListener(e,n,o),this.$$c){let s=this.$$l_u.get(n);s&&(s(),this.$$l_u.delete(n))}if(this.$$l[e]){let s=this.$$l[e].indexOf(n);s>=0&&this.$$l[e].splice(s,1)}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(r){return()=>{let i;return{c:function(){i=w("slot"),r!=="default"&&k(i,"name",r)},m:function(f,p){O(f,i,p)},d:function(f){f&&E(i)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let n={},o=Be(this);for(let r of this.$$s)r in o&&(n[r]=[e(r)]);for(let r of this.attributes){let i=this.$$g_p(r.name);i in this.$$d||(this.$$d[i]=G(i,r.value,this.$$p_d,"toProp"))}for(let r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});let s=()=>{this.$$r=!0;for(let r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){let i=G(r,this.$$d[r],this.$$p_d,"toAttribute");i==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,i)}this.$$r=!1};this.$$c.$$.after_update.push(s),s();for(let r in this.$$l)for(let i of this.$$l[r]){let f=this.$$c.$on(r,i);this.$$l_u.set(i,f)}this.$$l={}}}attributeChangedCallback(e,n,o){this.$$r||(e=this.$$g_p(e),this.$$d[e]=G(e,o,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(n=>this.$$p_d[n].attribute===e||!this.$$p_d[n].attribute&&n.toLowerCase()===e)||e}});function G(t,e,n,o){let s=n[t]?.type;if(e=s==="Boolean"&&typeof e!="boolean"?e!=null:e,!o||!n[t])return e;if(o==="toAttribute")switch(s){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(s){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var he=class{constructor(){g(this,"$$");g(this,"$$set")}$destroy(){M(this,1),this.$destroy=x}$on(t,e){if(!se(e))return x;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let o=n.indexOf(e);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!De(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};typeof globalThis<"u"&&(globalThis.__svelte||(globalThis.__svelte={v:new Set})).v.add(ee);function Qe(t){ue(t,"svelte-1gccfya",".app.svelte-1gccfya.svelte-1gccfya{height:100vh;width:100vw;display:flex;flex-direction:column;background-color:var(--bg-primary);color:var(--text-primary)}.loading-screen.svelte-1gccfya.svelte-1gccfya{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--spacing-md)}.loading-screen.svelte-1gccfya p.svelte-1gccfya{color:var(--text-secondary)}.vault-layout.svelte-1gccfya.svelte-1gccfya{display:flex;height:100%;overflow:hidden}.main-content.svelte-1gccfya.svelte-1gccfya{flex:1;display:flex;overflow:hidden}.notes-panel.svelte-1gccfya.svelte-1gccfya{display:flex;width:100%;height:100%}")}function Je(t){let e,n,o,s,r,i,f;n=new Sidebar({props:{selectedCategory:t[1],currentView:t[8]}}),n.$on("categoryChange",t[16]),n.$on("viewChange",t[17]),n.$on("newNote",t[15]),n.$on("lock",t[13]),n.$on("export",rt),n.$on("import",st);let p=[Xe,Ke],a=[];function u(c,d){return c[8]==="notes"?0:c[8]==="generator"?1:-1}return~(r=u(t,-1))&&(i=a[r]=p[r](t)),{c(){e=w("div"),L(n.$$.fragment),o=z(),s=w("main"),i&&i.c(),k(s,"class","main-content svelte-1gccfya"),k(e,"class","vault-layout svelte-1gccfya")},m(c,d){O(c,e,d),T(n,e,null),C(e,o),C(e,s),~r&&a[r].m(s,null),f=!0},p(c,d){let m={};d&2&&(m.selectedCategory=c[1]),d&256&&(m.currentView=c[8]),n.$set(m);let $=r;r=u(c,d),r===$?~r&&a[r].p(c,d):(i&&(Z(),v(a[$],1,1,()=>{a[$]=null}),K()),~r?(i=a[r],i?i.p(c,d):(i=a[r]=p[r](c),i.c()),y(i,1),i.m(s,null)):i=null)},i(c){f||(y(n.$$.fragment,c),y(i),f=!0)},o(c){v(n.$$.fragment,c),v(i),f=!1},d(c){c&&E(e),M(n),~r&&a[r].d()}}}function Ye(t){let e,n;return e=new LockScreen({props:{isFirstTime:t[4],error:t[6]}}),e.$on("unlock",t[11]),e.$on("setup",t[12]),{c(){L(e.$$.fragment)},m(o,s){T(e,o,s),n=!0},p(o,s){let r={};s&16&&(r.isFirstTime=o[4]),s&64&&(r.error=o[6]),e.$set(r)},i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),n=!1},d(o){M(e,o)}}}function Ze(t){let e;return{c(){e=w("div"),e.innerHTML='<div class="spinner"></div> <p class="svelte-1gccfya">Loading...</p>',k(e,"class","loading-screen svelte-1gccfya")},m(n,o){O(n,e,o)},p:x,i:x,o:x,d(n){n&&E(e)}}}function Ke(t){let e,n;return e=new PasswordGenerator({}),e.$on("copy",me),{c(){L(e.$$.fragment)},m(o,s){T(e,o,s),n=!0},p:x,i(o){n||(y(e.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),n=!1},d(o){M(e,o)}}}function Xe(t){let e,n,o,s,r;return n=new NoteList({props:{notes:t[9],selectedNoteId:t[0],searchQuery:t[2]}}),n.$on("selectNote",t[14]),n.$on("search",t[18]),s=new NoteEditor({props:{note:t[10]}}),s.$on("save",nt),s.$on("delete",ot),s.$on("copy",me),{c(){e=w("div"),L(n.$$.fragment),o=z(),L(s.$$.fragment),k(e,"class","notes-panel svelte-1gccfya")},m(i,f){O(i,e,f),T(n,e,null),C(e,o),T(s,e,null),r=!0},p(i,f){let p={};f&512&&(p.notes=i[9]),f&1&&(p.selectedNoteId=i[0]),f&4&&(p.searchQuery=i[2]),n.$set(p);let a={};f&1024&&(a.note=i[10]),s.$set(a)},i(i){r||(y(n.$$.fragment,i),y(s.$$.fragment,i),r=!0)},o(i){v(n.$$.fragment,i),v(s.$$.fragment,i),r=!1},d(i){i&&E(e),M(n),M(s)}}}function _e(t){let e,n=t[7].message+"",o,s;return{c(){e=w("div"),o=J(n),k(e,"class",s="toast toast-"+t[7].type+" svelte-1gccfya")},m(r,i){O(r,e,i),C(e,o)},p(r,i){i&128&&n!==(n=r[7].message+"")&&fe(o,n),i&128&&s!==(s="toast toast-"+r[7].type+" svelte-1gccfya")&&k(e,"class",s)},d(r){r&&E(e)}}}function et(t){let e,n,o,s,r,i=[Ze,Ye,Je],f=[];function p(u,c){return u[5]?0:u[3]?2:1}n=p(t,-1),o=f[n]=i[n](t);let a=t[7]&&_e(t);return{c(){e=w("div"),o.c(),s=z(),a&&a.c(),k(e,"class","app svelte-1gccfya")},m(u,c){O(u,e,c),f[n].m(e,null),C(e,s),a&&a.m(e,null),r=!0},p(u,[c]){let d=n;n=p(u,c),n===d?f[n].p(u,c):(Z(),v(f[d],1,1,()=>{f[d]=null}),K(),o=f[n],o?o.p(u,c):(o=f[n]=i[n](u),o.c()),y(o,1),o.m(e,s)),u[7]?a?a.p(u,c):(a=_e(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){r||(y(o),r=!0)},o(u){v(o),r=!1},d(u){u&&E(e),f[n].d(),a&&a.d()}}}function tt(){window.host.send("vault:status")}function nt(t){window.host.send("note:update",{note:t.detail.note})}function ot(t){window.host.send("note:delete",{noteId:t.detail.noteId})}function me(t){window.host.send("clipboard:copy",{text:t.detail.text})}function rt(){window.host.send("export:backup")}function st(){window.host.send("import:backup")}function it(t,e,n){let o,s,r=!1,i=!0,f=!0,p="",a=null,u=[],c=null,d=null,m="all",$="",R="notes",U;Y(()=>{U&&clearInterval(U)});function $e(){window.host.on("vault:state",l=>{let{unlocked:h,firstTime:_}=l;n(3,r=h),n(4,i=_),n(5,f=!1),h&&B()}),window.host.on("vault:unlock-result",l=>{let{success:h,error:_,firstTime:F}=l;n(5,f=!1),h?(n(3,r=!0),n(4,i=F??!1),B(),b("Vault unlocked","success")):(n(6,p=_||"Failed to unlock vault"),b(p,"error"))}),window.host.on("note:list-result",l=>{let{notes:h}=l;n(19,u=h||[])}),window.host.on("note:saved",l=>{let{success:h,note:_}=l;if(h&&_){let F=u.findIndex(Ce=>Ce.id===_.id);F>=0?(n(19,u[F]=_,u),n(19,u=[...u])):n(19,u=[...u,_]),b("Note saved","success")}}),window.host.on("note:deleted",l=>{let{success:h,noteId:_}=l;h&&(n(19,u=u.filter(F=>F.id!==_)),c===_&&(n(0,c=null),n(20,d=null)),b("Note deleted","success"))}),window.host.on("note:get-result",l=>{let{note:h}=l;h&&n(20,d=h)}),window.host.on("auto-lock:warning",()=>{b("Vault will lock in 30 seconds due to inactivity","warning")}),window.host.on("clipboard:copied",l=>{let{success:h}=l;h&&b("Copied to clipboard","success")}),window.host.on("export:result",l=>{let{success:h,error:_}=l;h?b("Backup exported successfully","success"):b(_||"Export failed","error")}),window.host.on("import:result",l=>{let{success:h,error:_,count:F}=l;h?(B(),b(`Imported ${F} notes successfully`,"success")):b(_||"Import failed","error")})}function B(){window.host.send("note:list",{category:m==="all"?void 0:m})}function be(){U=setInterval(()=>{r&&window.host.send("activity:ping")},3e4);let l=()=>{r&&window.host.send("activity:ping")};document.addEventListener("mousemove",l),document.addEventListener("keydown",l),document.addEventListener("click",l)}function ye(l){n(5,f=!0),n(6,p=""),window.host.send("vault:unlock",{password:l.detail.password})}function ve(l){n(5,f=!0),n(6,p=""),window.host.send("vault:setup",{password:l.detail.password})}function we(){window.host.send("vault:lock"),n(3,r=!1),n(19,u=[]),n(0,c=null),n(20,d=null),b("Vault locked","success")}function ke(l){n(0,c=l.detail.noteId),n(20,d=null),n(8,R="notes"),window.host.send("note:get",{id:l.detail.noteId})}function Fe(){let l={id:"",title:"Untitled Note",content:"",category:m==="all"?"personal":m,createdAt:new Date().toISOString(),modifiedAt:new Date().toISOString()};window.host.send("note:create",{note:l})}function xe(l){n(1,m=l.detail.category),B()}function Ee(l){n(8,R=l.detail.view),R==="generator"&&n(0,c=null)}function Se(l){n(2,$=l.detail.query)}function b(l,h){n(7,a={message:l,type:h}),setTimeout(()=>{n(7,a=null)},3e3)}return t.$$.update=()=>{t.$$.dirty&1572865&&n(10,o=d&&d.id===c?d:u.find(l=>l.id===c)||null),t.$$.dirty&524294&&n(9,s=u.filter(l=>{let h=m==="all"||l.category===m,_=!$||l.title.toLowerCase().includes($.toLowerCase())||l.content.toLowerCase().includes($.toLowerCase());return h&&_}))},[c,m,$,r,i,f,p,a,R,s,o,ye,ve,we,ke,Fe,xe,Ee,Se,u,d]}var X=class extends he{constructor(e){super(),pe(this,e,it,et,ie,{},Qe)}},ge=X;var at=new ge({target:document.getElementById("app")}),rn=at;export{rn as default};
//# sourceMappingURL=bundle.js.map
